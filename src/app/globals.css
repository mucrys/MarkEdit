@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 98%;
    --foreground: 261 10% 10%;
    --card: 0 0% 100%;
    --card-foreground: 261 10% 10%;
    --popover: 0 0% 100%;
    --popover-foreground: 261 10% 10%;
    --primary: 261 51% 47%;
    --primary-foreground: 0 0% 98%;
    --secondary: 261 15% 90%;
    --secondary-foreground: 261 51% 47%;
    --muted: 261 10% 90%;
    --muted-foreground: 261 10% 40%;
    --accent: 267 96% 85%;
    --accent-foreground: 261 51% 30%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 261 10% 85%;
    --input: 261 10% 85%;
    --ring: 261 51% 47%;
    --radius: 0.75rem;
  }
  .dark {
    --background: 261 10% 5%;
    --foreground: 0 0% 98%;
    --card: 261 10% 8%;
    --card-foreground: 0 0% 98%;
    --popover: 261 10% 8%;
    --popover-foreground: 0 0% 98%;
    --primary: 261 51% 55%;
    --primary-foreground: 0 0% 98%;
    --secondary: 261 20% 15%;
    --secondary-foreground: 261 51% 70%;
    --muted: 261 15% 12%;
    --muted-foreground: 261 10% 60%;
    --accent: 261 50% 25%;
    --accent-foreground: 267 96% 90%;
    --border: 261 15% 15%;
    --input: 261 15% 15%;
  }
}

@layer base {
  * {
    @apply border-border;
    -webkit-tap-highlight-color: transparent;
  }
  body {
    @apply bg-background text-foreground overflow-hidden antialiased;
    text-rendering: optimizeLegibility;
  }
}

.safe-top { padding-top: env(safe-area-inset-top); }
.safe-bottom { padding-bottom: env(safe-area-inset-bottom); }

.markdown-preview {
  @apply bg-background transition-colors duration-300;
}
.markdown-preview h1 { @apply text-3xl md:text-4xl font-bold mb-6 mt-8 border-b pb-2 text-foreground; }
.markdown-preview h2 { @apply text-xl md:text-2xl font-semibold mb-4 mt-6 text-foreground; }
.markdown-preview h3 { @apply text-lg md:text-xl font-medium mb-3 mt-5 text-foreground; }
.markdown-preview p { @apply mb-4 leading-relaxed text-muted-foreground text-[15px] md:text-[16px]; }
.markdown-preview ul { @apply list-disc pl-6 mb-4 space-y-2; }
.markdown-preview ol { @apply list-decimal pl-6 mb-4 space-y-2; }
.markdown-preview blockquote { @apply border-l-4 border-primary/40 pl-4 italic my-6 text-muted-foreground bg-muted/10 py-2 rounded-r-lg; }

.markdown-preview table { 
  display: block;
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 1.5rem;
  overflow-x: auto;
}

@media (min-width: 768px) {
  .markdown-preview table {
    display: table;
  }
}

.markdown-preview th { @apply bg-muted p-2 border border-border font-bold text-left; }
.markdown-preview td { @apply p-2 border border-border; }

.katex-display {
  @apply my-6 overflow-x-auto overflow-y-hidden;
}

::-webkit-scrollbar { width: 4px; height: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { @apply bg-muted-foreground/20 rounded-full; }
::-webkit-scrollbar-thumb:hover { @apply bg-muted-foreground/40; }

@media print {
  [data-sidebar="sidebar"],
  header,
  footer,
  .sidebar-trigger,
  [data-sidebar="trigger"],
  button,
  .print-hidden,
  input,
  .fixed,
  .absolute:not(.prose *),
  [role="dialog"] {
    display: none !important;
  }

  html, body {
    overflow: visible !important;
    height: auto !important;
    background: white !important;
    color: black !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  .sidebar-provider,
  .sidebar-inset,
  main,
  .flex-1,
  .grid {
    display: block !important;
    overflow: visible !important;
    height: auto !important;
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
  }

  .markdown-preview {
    display: block !important;
    position: static !important;
    width: 100% !important;
    height: auto !important;
    overflow: visible !important;
    padding: 2cm !important;
    margin: 0 !important;
    background: white !important;
    visibility: visible !important;
  }

  article.prose {
    max-width: none !important;
    color: black !important;
    visibility: visible !important;
  }

  pre, blockquote, table, figure, .block {
    page-break-inside: avoid;
  }

  h1, h2, h3 {
    page-break-after: avoid;
  }
}
